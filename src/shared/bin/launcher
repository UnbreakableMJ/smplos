#!/bin/bash
# smplOS launcher -- categorized tabs + global search behavior
# Inspired by adi1090x type-1/style-15
# Keybinding: Super (bare key press) | EWW bar logo button
#
# Uses script modes backed by ~/.cache/smplos/app_index.
# Category tabs are navigation views, but typing searches globally across all apps.

THEME="$HOME/.config/rofi/smplos-launcher.rasi"
MODE="${1:-all}"

# Ensure settings cache exists
[[ ! -f "$HOME/.cache/smplos/app_index" ]] && rebuild-app-cache 2>/dev/null

theme_args=()
[[ -f "$THEME" ]] && theme_args=(-theme "$THEME")

rofi -show "$MODE" -show-icons \
  -modi "all:rofi-apps-all-src,multimedia:rofi-apps-multimedia-src,development:rofi-apps-development-src,internet:rofi-apps-internet-src,office:rofi-apps-office-src,apps:rofi-apps-apps-src,settings:rofi-settings-src" \
  -display-all "All" \
  -display-multimedia "Multimedia" \
  -display-development "Development" \
  -display-internet "Internet" \
  -display-office "Office" \
  -display-apps "Apps" \
  -display-settings "Settings" \
  "${theme_args[@]}"
